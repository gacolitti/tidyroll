---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# tidyroll

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Travis build status](https://travis-ci.org/gacolitti/tidyroll.svg?branch=master)](https://travis-ci.org/gacolitti/tidyroll)
[![Codecov test coverage](https://codecov.io/gh/gacolitti/tidyroll/branch/master/graph/badge.svg)](https://codecov.io/gh/gacolitti/tidyroll?branch=master)
<!-- badges: end -->

`tidyroll` makes it easy to work with irregular time slices for modeling and prediciton with `tidymodels`.

The main function `rolling_origin_nested()` is a wrapper around `rsample::rolling_origin` and facilitates
rolling over different time units instead of a fixed window. The motivation for this function comes
from this [vignette](https://tidymodels.github.io/rsample/articles/Applications/Time_Series.html). 

## Installation

```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("gacolitti/tidyroll")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(tidyroll)
library(dplyr)
library(rsample)

data("airquality2")

roll <- rolling_origin_nested(
  data = airquality2, 
  time_var = "date", 
  unit = "week", 
  assess = 3,
  start = mean(airquality2$date, na.rm = TRUE),
  end = NULL
)
roll

analysis(roll$splits[[1]]) %>% tail()
assessment(roll$splits[[1]]) %>% head()

analysis(roll$splits[[1]])$data %>% tail()
assessment(roll$splits[[1]])$data %>% head()
```

